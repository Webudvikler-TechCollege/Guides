# Guide til Cookies i JavaScript ğŸª

## Hvad er en cookie?

En **cookie** er en lille tekstfil som din browser gemmer pÃ¥ din computer. Websites bruger cookies til at huske information om dig mellem besÃ¸g.

**Eksempler pÃ¥ hvad cookies bruges til:**
- Holde dig logget ind pÃ¥ et website
- Huske din indkÃ¸bskurv
- Gemme dine indstillinger (sprog, tema osv.)
- Spore din aktivitet (analysetools)

---

## SÃ¥dan fungerer cookies

```
1. Du besÃ¸ger et website
2. Website sender en cookie til din browser
3. Browser gemmer cookien pÃ¥ din computer
4. NÃ¦ste gang du besÃ¸ger websitet, sender browseren cookien tilbage
5. Website kan nu "huske" dig
```

**Vigtigt at vide:**
- Cookies er **kun** tilgÃ¦ngelige for det website der oprettede dem
- Cookies har en **udlÃ¸bsdato** - derefter slettes de automatisk
- Du kan se og slette cookies i din browser

---

## Arbejde med cookies i JavaScript

### ğŸ“ Oprette en cookie

```javascript
// Simpel cookie (udlÃ¸ber nÃ¥r browseren lukkes)
document.cookie = "username=Peter"

// Cookie med udlÃ¸bsdato (7 dage)
const expires = new Date()
expires.setTime(expires.getTime() + 7 * 24 * 60 * 60 * 1000) // 7 dage i millisekunder
document.cookie = `username=Peter;expires=${expires.toUTCString()};path=/`
```

**Forklaring:**
- `username=Peter` - navnet og vÃ¦rdien
- `expires=...` - hvornÃ¥r cookien udlÃ¸ber
- `path=/` - cookien er tilgÃ¦ngelig pÃ¥ hele websitet

---

### ğŸ“– LÃ¦se en cookie

```javascript
// Alle cookies returneres som Ã©n lang tekst-streng
console.log(document.cookie)
// Output: "brugernavn=Peter; tema=dark; sprog=da"

// For at finde en specifik cookie skal vi parse strengen
function getCookie(name) {
    const nameEQ = name + "="
    const cookies = document.cookie.split(';') // Split ved semikolon
    
    for (let i = 0; i < cookies.length; i++) {
        let cookie = cookies[i].trim() // Fjern mellemrum
        if (cookie.indexOf(nameEQ) === 0) {
            return cookie.substring(nameEQ.length) // Returner vÃ¦rdien
        }
    }
    return null // Cookie ikke fundet
}

// Brug funktionen
const brugernavn = getCookie('username')
console.log(brugernavn) // Output: "Peter"
```

---

### ğŸ—‘ï¸ Slette en cookie

```javascript
// Slet en cookie ved at sÃ¦tte udlÃ¸bsdato til fortiden
document.cookie = "username=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/"

// Smart funktion til at slette cookies
function deleteCookie(name) {
    document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`
}

// Brug funktionen
deleteCookie('username')
```

---

## Praktisk eksempel: Login-system

```javascript
// 1. Gem login-token nÃ¥r bruger logger ind
function loginUser(token) {
    const expires = new Date()
    expires.setTime(expires.getTime() + 7 * 24 * 60 * 60 * 1000) // 7 dage
    document.cookie = `login_token=${token};expires=${expires.toUTCString()};path=/`
}

// 2. Tjek om bruger er logget ind
function isLoggedIn() {
    const token = getCookie('login_token')
    return token !== null // True hvis cookie findes
}

// 3. Log bruger ud
function logoutUser() {
    deleteCookie('login_token')
    window.location.href = '/login.html' // Send til login-siden
}

// Brug funktionerne
if (isLoggedIn()) {
    console.log('Velkommen tilbage!')
} else {
    console.log('Du skal logge ind')
}
```

---

## Cookie attributter

### `expires`
HvornÃ¥r cookien skal slettes

```javascript
const expires = new Date()
expires.setTime(expires.getTime() + 24 * 60 * 60 * 1000) // 1 dag
document.cookie = `navn=vÃ¦rdi;expires=${expires.toUTCString()}`
```

### `max-age`
Alternativ til `expires` - antal sekunder cookien skal leve

```javascript
document.cookie = "navn=vÃ¦rdi;max-age=86400" // 1 dag (86400 sekunder)
```

### `path`
Hvilke sider cookien er tilgÃ¦ngelig pÃ¥

```javascript
document.cookie = "navn=vÃ¦rdi;path=/" // Hele websitet
document.cookie = "navn=vÃ¦rdi;path=/admin" // Kun /admin og undersider
```

### `secure`
Cookien sendes kun over HTTPS (sikker forbindelse)

```javascript
document.cookie = "navn=vÃ¦rdi;secure"
```

### `SameSite`
Beskytter mod CSRF-angreb

```javascript
document.cookie = "navn=vÃ¦rdi;SameSite=Strict" // Kun sendt til eget website
document.cookie = "navn=vÃ¦rdi;SameSite=Lax" // Sendes ved normale links
```

---

## HjÃ¦lpefunktioner (copy-paste venlige)

```javascript
// Gem cookie
function setCookie(name, value, days = 7) {
    const expires = new Date()
    expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000)
    document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/;SameSite=Strict`
}

// Hent cookie
function getCookie(name) {
    const nameEQ = name + "="
    const cookies = document.cookie.split(';')
    for (let i = 0; i < cookies.length; i++) {
        let cookie = cookies[i].trim()
        if (cookie.indexOf(nameEQ) === 0) {
            return cookie.substring(nameEQ.length)
        }
    }
    return null
}

// Slet cookie
function deleteCookie(name) {
    document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`
}

// Brug
setCookie('username', 'Peter', 30) // Gem i 30 dage
const navn = getCookie('username') // Hent vÃ¦rdi
deleteCookie('username') // Slet cookie
```

---

## Cookies vs. LocalStorage vs. SessionStorage

| Feature | Cookies | LocalStorage | SessionStorage |
|---------|---------|--------------|----------------|
| **StÃ¸rrelse** | ~4 KB | ~5-10 MB | ~5-10 MB |
| **UdlÃ¸ber** | Ja (du vÃ¦lger) | Aldrig | Ved browserluk |
| **Sendes til server** | Ja (automatisk) | Nej | Nej |
| **Bedst til** | Login-tokens | Store data | Midlertidige data |

**Tommelfingerregel:**
- Brug **cookies** til login/authentication
- Brug **localStorage** til at gemme bruger-indstillinger
- Brug **sessionStorage** til midlertidige data i Ã©n session

---

## Sikkerhed âš ï¸

**Vigtige sikkerhedsregler:**

1. **Gem aldrig passwords i cookies** - kun tokens/session IDs
2. **Brug `SameSite=Strict`** - beskytter mod angreb
3. **Brug `Secure` flag** - kun send over HTTPS
4. **SÃ¦t kort udlÃ¸bstid** - specielt for login-tokens
5. **Valider altid pÃ¥ server-side** - stol ikke pÃ¥ cookies alene

```javascript
// Sikker cookie til login
function setSecureToken(token) {
    const expires = new Date()
    expires.setTime(expires.getTime() + 24 * 60 * 60 * 1000) // 1 dag
    document.cookie = `auth_token=${token};expires=${expires.toUTCString()};path=/;Secure;SameSite=Strict`
}
```

---

## Opgaver til at Ã¸ve dig ğŸ’ª

### Opgave 1: Tema-switcher
Lav en knap der skifter mellem lyst og mÃ¸rkt tema, og gem valget i en cookie.

### Opgave 2: "Husk mig" checkbox
Lav en login-formular med "Husk mig" checkbox der gemmer brugernavnet i 30 dage.

### Opgave 3: Cookie-banner
Lav en cookie-banner (som alle websites har) der kun vises Ã©n gang, og gem brugerens valg.

---

## Debugging tips ğŸ›

**Se cookies i Chrome DevTools:**
1. Tryk `F12`
2. GÃ¥ til `Application` tab
3. Udvid `Cookies` i venstre menu
4. Klik pÃ¥ dit website

**Se cookies i Firefox:**
1. Tryk `F12`
2. GÃ¥ til `Storage` tab
3. Udvid `Cookies`

**Test cookie-funktioner i konsollen:**
```javascript
// Opret testcookie
setCookie('test', 'hejsa', 1)

// LÃ¦s den
console.log(getCookie('test'))

// Slet den
deleteCookie('test')
```

---

## Resurser ğŸ“š

- [MDN Web Docs: Cookies](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies)
- [JavaScript.info: Cookies](https://javascript.info/cookie)

**Held og lykke med cookies!** ğŸª